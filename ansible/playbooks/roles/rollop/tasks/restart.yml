---
- name: restart l1 service
  ansible.builtin.systemd:
    name: l1
    state: restarted
  when: "'l1' in group_names"
  tags:
    - l1
    - restart

- name: Iterate over l2 client types
  ansible.builtin.debug:
    msg: "Restarting l2-{{ l2_service }} service"
  loop:
    - engine
    - sequencer
    - proposer
    - batcher
  loop_control:
    loop_var: l2_service
  tags:
    - l2
    - restart

- name: Restart l2 service
  ansible.builtin.systemd:
    name: "l2-{{ item }}"
    state: restarted
  loop:
    - engine
    - sequencer
    - proposer
    - batcher
  when: "'l2_' + item in group_names"
  tags:
    - l2
    - restart
